# Keep Supabase Alive - é€±1å›è‡ªå‹•å®Ÿè¡Œ
name: Keep Supabase Active

on:
  schedule:
    # æ¯é€±æœˆæ›œæ—¥ã®åˆå‰9æ™‚ï¼ˆæ—¥æœ¬æ™‚é–“ï¼‰ã«å®Ÿè¡Œ
    # UTCã§0æ™‚ = æ—¥æœ¬æ™‚é–“9æ™‚
    - cron: '0 0 * * 1'
  
  # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
  workflow_dispatch:

jobs:
  ping-supabase:
    runs-on: ubuntu-latest
    
    steps:
      - name: Ping Supabase Project
        run: |
          echo "Pinging Supabase to keep project active..."
          
          # Supabaseã®APIã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
          curl -X GET "${{ secrets.SUPABASE_URL }}/rest/v1/" \
            -H "apikey: ${{ secrets.SUPABASE_ANON_KEY }}" \
            -H "Content-Type: application/json"
          
          echo "âœ… Supabase pinged successfully!"
      
      - name: Ping Vercel Deployment (Optional)
        run: |
          if [ -n "${{ secrets.VERCEL_URL }}" ]; then
            echo "Pinging Vercel deployment..."
            curl -X GET "https://${{ secrets.VERCEL_URL }}"
            echo "âœ… Vercel deployment pinged!"
          else
            echo "âš ï¸ VERCEL_URL not set, skipping..."
          fi
      
      - name: Log success
        run: |
          echo "ğŸ‰ Keep-alive job completed successfully!"
          echo "Next run: $(date -d 'next monday 09:00' '+%Y-%m-%d %H:%M %Z')"
